{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export const STRING = Symbol('ENV_STRING')\nexport const NUMBER = Symbol('ENV_NUMBER')\nexport const OBJECT = Symbol('ENV_OBJECT')\nexport const DATE = Symbol('ENV_DATE')\nexport type EnvironmentType = typeof STRING | typeof NUMBER | typeof OBJECT | typeof DATE\ntype EnvironmentSchema = Record<symbol, EnvironmentType>\n\nfunction parseValue(value: string, type: EnvironmentType) {\n  switch (type) {\n    case NUMBER: {\n      return Number(value)\n    }\n\n    case OBJECT: {\n      return JSON.parse(value)\n    }\n\n    case DATE: {\n      return new Date(value)\n    }\n\n    default: {\n      return value\n    }\n  }\n}\n\nexport default function forceEnvironmentVars<E extends EnvironmentSchema>(\n  environmentSchema: E,\n  defaultValues?: {\n    [key in keyof E]?: unknown\n  }\n) {\n  const envVars: {\n    [key in keyof E]?: unknown\n  } = {}\n\n  Object.entries(environmentSchema).forEach(([variableName, variableType]) => {\n    if (process.env[variableName]) {\n      envVars[variableName as keyof E] = parseValue(\n        process.env[variableName] as string,\n        variableType as EnvironmentType\n      )\n      return\n    }\n\n    const defaultValue = defaultValues?.[variableName as keyof E]\n    if (defaultValue == null) {\n      throw new Error(`Environment Variable ${variableName} not found`)\n    }\n\n    envVars[variableName as keyof E] = defaultValue\n  })\n\n  return envVars\n}\n"],"mappings":"AAAO,IAAMA,EAAS,OAAO,YAAY,EAC5BC,EAAS,OAAO,YAAY,EAC5BC,EAAS,OAAO,YAAY,EAC5BC,EAAO,OAAO,UAAU,EAIrC,SAASC,EAAWC,EAAeC,EAAuB,CACxD,OAAQA,EAAM,CACZ,KAAKL,EACH,OAAO,OAAOI,CAAK,EAGrB,KAAKH,EACH,OAAO,KAAK,MAAMG,CAAK,EAGzB,KAAKF,EACH,OAAO,IAAI,KAAKE,CAAK,EAGvB,QACE,OAAOA,CAEX,CACF,CAEe,SAARE,EACLC,EACAC,EAGA,CACA,IAAMC,EAEF,CAAC,EAEL,cAAO,QAAQF,CAAiB,EAAE,QAAQ,CAAC,CAACG,EAAcC,CAAY,IAAM,CAC1E,GAAI,QAAQ,IAAID,CAAY,EAAG,CAC7BD,EAAQC,CAAuB,EAAIP,EACjC,QAAQ,IAAIO,CAAY,EACxBC,CACF,EACA,OAGF,IAAMC,EAAeJ,IAAgBE,CAAuB,EAC5D,GAAIE,GAAgB,KAClB,MAAM,IAAI,MAAM,wBAAwBF,aAAwB,EAGlED,EAAQC,CAAuB,EAAIE,CACrC,CAAC,EAEMH,CACT","names":["STRING","NUMBER","OBJECT","DATE","parseValue","value","type","forceEnvironmentVars","environmentSchema","defaultValues","envVars","variableName","variableType","defaultValue"]}